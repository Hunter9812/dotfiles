;; -----------------------------------------------------------------------------
;; 必须的配置条目 defcfg
;; -----------------------------------------------------------------------------

(defcfg
    process-unmapped-keys yes
    sequence-timeout 2000
    windows-altgr add-lctl-release
)

;; -------------------------------------------------------------------------------------------------
;; 配置文件必须只有一个 defsrc 条目
;; 1. defsrc 条目由 defsrc 和键名组成, 键名之间用空格分隔
;; 2. defsrc 条目被视为一个长序列, 空格 (空格, 制表符, 换行符) 的数量是不相关的, 您可以使用空格, 制表符或换行符来分
;;    隔键名和键值
;; -------------------------------------------------------------------------------------------------

(defsrc
    grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc 
    tab  q    w    e    r    t    y    u    i    o    p    [    ]    \
    caps a    s    d    f    g    h    j    k    l    ;    '    ret
    lsft z    x    c    v    b    n    m    ,    .    /    rsft
    lctl lmet lalt           spc            ralt rmet rctl
)

;; -------------------------------------------------------------------------------------------------
;; defalias
;; -------------------------------------------------------------------------------------------------
(defalias
    ;; 单击 caps 映射成 esc, 按下 caps 不释放映射成 lctl
    ;; tab-hold 后的第二个参数表示按下后必须保持 xxx 毫秒以上, caps 才会作为 lctl 键
    ;; tap-hold-press
    ;;     如果按下不同的键, 即使现在 caps 还不是作为 lctl, 此时也会作为 lctl 键, 和
    ;;     tap-hold-release 不同的是, 当 c 键按下去时, lctrl+c 就发挥作用了
    ;; tap-hold-release 比如说 caps 要按下保持 1s 中才会被当作 lctl 使用, 但是如果单击了其他键如 c,
    ;; 只有等待 c 释放后, lctrl+c 就发挥作用了
    cap  (tap-hold-press 200 200 esc lctl)
)

;; -------------------------------------------------------------------------------------------------
;; 配置文件必须至少有一个 deflayer 条目, 这定义了当 kanata 运行时, desrc 中映射的每个物理键的行为
;; 1. deflayer 中的键 / 动作的顺序对应于 defsrc 中定义的相同序列位置中的物理键
;; -------------------------------------------------------------------------------------------------
(deflayer start
	grv   1       2         3    4    5    6    7    8    9    0    -    =    bspc  
	tab   q       w         e    r    t    y    u    i    o    p    [    ]    \
	@cap  a       s         d    f    g    h    j    k    l    ;    '    ret
	lsft  z       x         c    v    b    n    m    ,    .    /    rsft
	lctl  lmet    lalt           spc            ralt rmet rctl
)
